<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>承認待ちユーザー - 管理者ダッシュボード</title>
    <!-- AdminLTE CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/admin-lte@3.2.0/dist/css/adminlte.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <style>
        /* チェックボックス配置の調整 */
        .form-check-input {
            margin-top: 0;
            margin-left: 0;
            position: static;
        }
        .table th, .table td {
            vertical-align: middle;
        }
        /* チェックボックス列の幅を固定 */
        .checkbox-column {
            width: 40px;
            text-align: center;
        }
    </style>
</head>
<body class="hold-transition sidebar-mini">
    <div class="wrapper">
        <!-- 共通ヘッダー -->
        <div id="header"></div>

        <!-- 共通サイドバー -->
        <div id="sidebar"></div>

        <!-- メインコンテンツ -->
        <div class="content-wrapper">
            <div class="content-header">
                <div class="container-fluid">
                    <div class="row mb-2">
                        <div class="col-sm-6">
                            <h1 class="m-0">承認待ちユーザー</h1>
                        </div>
                        <div class="col-sm-6 text-end">
                            <button class="btn btn-info me-2" data-bs-toggle="modal" data-bs-target="#screenshotHelpModal">
                                <i class="bi bi-question-circle"></i> スクリーンショット確認手順
                            </button>
                            <button class="btn btn-primary" id="bulkApproveBtn">
                                <i class="bi bi-check-circle"></i> 選択したユーザーを承認
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="content">
                <div class="container-fluid">
                    <div class="card">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th class="checkbox-column">
                                                <input type="checkbox" id="selectAllCheckbox" class="form-check-input">
                                            </th>
                                            <th>ユーザー名</th>
                                            <th>メールアドレス</th>
                                            <th>書類状態</th>
                                            <th>操作</th>
                                        </tr>
                                    </thead>
                                    <tbody id="pendingUsersTable">
                                        <!-- ユーザーリストはJavaScriptで動的に追加 -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- フッター -->
        <footer class="main-footer">
            <strong>Copyright &copy; 2024 <a href="#">Hontono Kuchikomi</a>.</strong>
            All rights reserved.
        </footer>
    </div>

    <!-- スクリーンショット確認ヘルプモーダル -->
    <div class="modal fade" id="screenshotHelpModal" tabindex="-1" aria-labelledby="screenshotHelpModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-info">
                    <h5 class="modal-title" id="screenshotHelpModalLabel">スクリーンショット確認手順</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h4>スクリーンショット確認の重要性</h4>
                    <p>15chでは、実際のサービス利用者だけが口コミを投稿できるよう、スクリーンショットによる承認制を採用しています。これにより、信頼性の高い口コミの収集と、質の高いコミュニティの維持を実現しています。</p>
                    
                    <div class="alert alert-info">
                        <i class="bi bi-info-circle"></i> <strong>ユーザーの流れ：</strong><br>
                        1. ユーザーは登録後、マイページからスクリーンショットをアップロード<br>
                        2. 管理者がスクリーンショットを確認し、承認または拒否<br>
                        3. 承認されたユーザーのみが投稿可能に
                    </div>
                    
                    <h5>スクリーンショット確認のポイント：</h5>
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-success text-white">
                                    <h5 class="mb-0"><i class="bi bi-check-circle"></i> 承認すべきスクリーンショット</h5>
                                </div>
                                <div class="card-body">
                                    <ul>
                                        <li>対象サービスの利用画面が明確に確認できる</li>
                                        <li>ユーザー名やアカウント情報が確認できる</li>
                                        <li>最近の日付が確認できる（可能な場合）</li>
                                        <li>画像が鮮明で改ざんの痕跡がない</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-danger text-white">
                                    <h5 class="mb-0"><i class="bi bi-x-circle"></i> 拒否すべきスクリーンショット</h5>
                                </div>
                                <div class="card-body">
                                    <ul>
                                        <li>対象サービスとは無関係な画像</li>
                                        <li>明らかに編集・改ざんされている</li>
                                        <li>極端に古い日付の画面キャプチャ</li>
                                        <li>極端に不鮮明で内容確認ができない</li>
                                        <li>他人の個人情報が過剰に含まれている</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h5>確認手順：</h5>
                    <ol>
                        <li>ユーザーリストから確認したいユーザーの「詳細」ボタンをクリック</li>
                        <li>アップロードされたスクリーンショットを確認</li>
                        <li>スクリーンショットの内容が基準を満たしているか確認</li>
                        <li>問題がなければ「承認」ボタンをクリック</li>
                        <li>問題がある場合は「拒否」をクリックし、理由を入力</li>
                    </ol>
                    
                    <div class="alert alert-warning">
                        <i class="bi bi-exclamation-triangle"></i> <strong>注意事項：</strong><br>
                        ・拒否したユーザーには自動的に理由が通知されます<br>
                        ・ユーザーは再度スクリーンショットを提出することができます<br>
                        ・判断に迷う場合は、他の管理者に相談してください
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">閉じる</button>
                </div>
            </div>
        </div>
    </div>

    <!-- AdminLTE JS -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/admin-lte@3.2.0/dist/js/adminlte.min.js"></script>
    <script src="/js/admin/pending-users.js"></script>
    <script>
        // 共通ヘッダーの読み込み
        fetch('/admin/components/header.html')
            .then(response => response.text())
            .then(html => {
                document.getElementById('header').innerHTML = html;
            });

        // 共通サイドバーの読み込み
        fetch('/admin/components/sidebar.html')
            .then(response => response.text())
            .then(html => {
                document.getElementById('sidebar').innerHTML = html;
            });
    </script>
</body>
</html> 